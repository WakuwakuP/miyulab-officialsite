version: '3.4'

services:
  app:
    build: ./docker/app
    restart: always
    ports:
      - "${IP}:${PORT}:${PORT}"
    volumes:
      - ./src/app:/app
    command: sh -c "yarn && yarn run dev"
    environment:
      CHOKIDAR_USEPOLLING: "true"
      NODE_ENV: development
      PORT: ${PORT}
      MICROCMS_SERVICE_DOMAIN: ${MICROCMS_SERVICE_DOMAIN}
      MICROCMS_API_KEY: ${MICROCMS_API_KEY}
